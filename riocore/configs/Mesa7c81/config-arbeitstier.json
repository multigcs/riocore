{
    "name": "Mesa7c81",
    "boardcfg": "Mesa7c81",
    "c_defines": {
        "SPI_SPEED": "BCM2835_SPI_CLOCK_DIVIDER_64"
    },
    "flashcmd": "./spiflash.sh rio-2048.bin",
    "breakouts": [
        {
            "slot": "B",
            "breakout": "china-bob5x",
            "name": "bob1",
            "pos": [
                610.0,
                130.0
            ],
            "rotate": 0
        }
    ],
    "linuxcnc": {
        "ini": {
            "DISPLAY": {
                "MAX_FEED_OVERRIDE": 3.0,
                "MAX_ANGULAR_VELOCITY": 10.0,
                "MAX_LINEAR_VELOCITY": 120.0,
                "DEFAULT_LINEAR_VELOCITY": 100.0
            },
            "EMCMOT": {
                "SERVO_PERIOD": 500000
            }
        },
        "machinetype": "mill",
        "net": [
            {
                "_source": "riov.splindle_overload.value",
                "source": "rio.mb1.power < 3600.0",
                "target": "&motion.enable"
            },
            {
                "source": "rio.Waterflow.frequency > 3.0",
                "target": "&motion.enable"
            }
        ],
        "_vcp_type": "gladevcp"
    },
    "plugins": [
        {
            "type": "spi_prog",
            "pins": {
                "mosi": {
                    "pin": "SPI:MOSI"
                },
                "miso": {
                    "pin": "SPI:MISO"
                },
                "sclk": {
                    "pin": "SPI:SCLK"
                },
                "sel": {
                    "pin": "SPI:SEL"
                },
                "prog": {
                    "pin": "RPI:GPIO25"
                },
                "reboot": {
                    "pin": "EEPROM:REBOOT"
                },
                "eeprom_mosi": {
                    "pin": "EEPROM:MOSI"
                },
                "eeprom_miso": {
                    "pin": "EEPROM:MISO"
                },
                "eeprom_sclk": {
                    "pin": "EEPROM:SCLK"
                },
                "eeprom_sel": {
                    "pin": "EEPROM:SEL"
                }
            },
            "uid": "spi0",
            "pos": [
                710.0,
                680.0
            ]
        },
        {
            "type": "blink",
            "pins": {
                "led": {
                    "pin": "LED:L0",
                    "modifier": [
                        {
                            "type": "onerror",
                            "invert": true,
                            "pos": [
                                1180.0,
                                1070.0
                            ]
                        }
                    ]
                }
            },
            "uid": "blink0",
            "pos": [
                1290.0,
                1060.0
            ]
        },
        {
            "type": "stepdir",
            "pins": {
                "dir": {
                    "pin": "bob1:X:dir"
                },
                "step": {
                    "pin": "bob1:X:step"
                }
            },
            "uid": "stepdir0",
            "pos": [
                1290.0,
                400.0
            ],
            "signals": {
                "velocity": {
                    "net": "",
                    "setp": ""
                },
                "position": {
                    "net": "",
                    "setp": ""
                },
                "enable": {
                    "net": "",
                    "setp": ""
                }
            },
            "is_joint": true,
            "joint": {
                "scale": 2000.0,
                "ferror": 2.0,
                "min_ferror": 0.1,
                "max_velocity": 100.0,
                "max_acceleration": 300.0,
                "home_offset": -5.0,
                "min_limit": -4.0,
                "max_limit": 900.0
            },
            "axis": "X",
            "name": "X1"
        },
        {
            "type": "stepdir",
            "pins": {
                "dir": {
                    "pin": "bob1:Y:dir"
                },
                "step": {
                    "pin": "bob1:Y:step"
                }
            },
            "pos": [
                1290.0,
                320.0
            ],
            "uid": "stepdir1",
            "signals": {
                "velocity": {
                    "net": "",
                    "setp": ""
                },
                "position": {
                    "net": "",
                    "setp": ""
                },
                "enable": {
                    "net": "",
                    "setp": ""
                }
            },
            "is_joint": true,
            "joint": {
                "scale": 2000.0,
                "ferror": 2.0,
                "min_ferror": 0.1,
                "max_velocity": 100.0,
                "max_acceleration": 300.0,
                "home_offset": -5.0,
                "min_limit": -4.0,
                "max_limit": 900.0
            },
            "axis": "X",
            "name": "X2"
        },
        {
            "type": "stepdir",
            "pins": {
                "dir": {
                    "pin": "bob1:Z:dir"
                },
                "step": {
                    "pin": "bob1:Z:step"
                }
            },
            "pos": [
                1290.0,
                240.0
            ],
            "uid": "stepdir2",
            "signals": {
                "velocity": {
                    "net": "",
                    "setp": ""
                },
                "position": {
                    "net": "",
                    "setp": ""
                },
                "enable": {
                    "net": "",
                    "setp": ""
                }
            },
            "is_joint": true,
            "joint": {
                "scale": 2000.0,
                "ferror": 2.0,
                "min_ferror": 0.1,
                "max_velocity": 100.0,
                "max_acceleration": 300.0,
                "home": 0.0,
                "home_offset": -5.0,
                "min_limit": -4.0,
                "max_limit": 450.0
            },
            "axis": "Y",
            "name": "Y"
        },
        {
            "type": "stepdir",
            "pins": {
                "dir": {
                    "pin": "bob1:A:dir"
                },
                "step": {
                    "pin": "bob1:A:step"
                }
            },
            "pos": [
                1290.0,
                160.0
            ],
            "uid": "stepdir3",
            "signals": {
                "velocity": {
                    "net": "",
                    "setp": ""
                },
                "position": {
                    "net": "",
                    "setp": ""
                },
                "enable": {
                    "net": "",
                    "setp": ""
                }
            },
            "is_joint": true,
            "joint": {
                "scale": -2000.0,
                "ferror": 2.0,
                "min_ferror": 0.1,
                "max_velocity": 100.0,
                "max_acceleration": 300.0,
                "home": 95.0,
                "home_offset": 100.0,
                "min_limit": 0.0,
                "max_limit": 100.0
            },
            "axis": "Z",
            "name": "Z"
        },
        {
            "type": "bitout",
            "pins": {
                "bit": {
                    "pin": "bob1:ALL:en",
                    "modifier": [
                        {
                            "type": "onerror",
                            "pos": [
                                1180.0,
                                120.0
                            ]
                        },
                        {
                            "type": "invert",
                            "pos": [
                                1060.0,
                                120.0
                            ]
                        }
                    ]
                }
            },
            "uid": "bitout0",
            "pos": [
                1290.0,
                110.0
            ],
            "signals": {
                "bit": {
                    "net": "halui.machine.is-on",
                    "setp": ""
                }
            },
            "name": "senable"
        },
        {
            "type": "bitout",
            "pins": {
                "bit": {
                    "pin": "bob1:RELAIS:out"
                }
            },
            "uid": "bitout1",
            "pos": [
                1290.0,
                60.0
            ],
            "signals": {
                "bit": {
                    "net": "",
                    "setp": ""
                }
            }
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "bob1:OPTO:in0"
                }
            },
            "uid": "bitin0",
            "pos": [
                1290.0,
                720.0
            ],
            "signals": {
                "bit": {
                    "net": "joint.0.home-sw-in",
                    "setp": ""
                }
            },
            "name": "homeX1"
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "bob1:OPTO:in1"
                }
            },
            "signals": {
                "bit": {
                    "net": "joint.1.home-sw-in",
                    "setp": ""
                }
            },
            "name": "homeX2",
            "uid": "bitin1",
            "pos": [
                1290.0,
                670.0
            ]
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "bob1:OPTO:in2"
                }
            },
            "signals": {
                "bit": {
                    "_net": "joint.2.home-sw-in,joint.2.neg-lim-sw-in",
                    "net": "joint.2.home-sw-in",
                    "setp": ""
                }
            },
            "name": "homeY",
            "uid": "bitin2",
            "pos": [
                1290.0,
                620.0
            ]
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "bob1:OPTO:in3"
                }
            },
            "signals": {
                "bit": {
                    "net": "joint.3.home-sw-in",
                    "setp": ""
                }
            },
            "name": "homeZ",
            "uid": "bitin3",
            "pos": [
                1290.0,
                570.0
            ]
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "bob1:OPTO:in4"
                }
            },
            "signals": {
                "bit": {
                    "net": "",
                    "setp": ""
                }
            },
            "name": "salarm",
            "uid": "bitin4",
            "pos": [
                1290.0,
                520.0
            ]
        },
        {
            "type": "modbus",
            "tx_buffersize": 96,
            "rx_buffersize": 96,
            "pins": {
                "rx": {
                    "pin": "MODBUS1:RX"
                },
                "tx": {
                    "pin": "MODBUS1:TX"
                },
                "tx_enable": {
                    "pin": "MODBUS1:TX_EN",
                    "modifier": [
                        {
                            "type": "invert",
                            "pos": [
                                1180.0,
                                1240.0
                            ]
                        }
                    ]
                }
            },
            "uid": "mb0",
            "pos": [
                1290.0,
                1200.0
            ],
            "signals": {
                "spindle_speed_command": {
                    "net": "spindle.0.speed-out",
                    "setp": ""
                },
                "spindle_speed_fb_rps": {
                    "net": "spindle.0.speed-in",
                    "setp": ""
                },
                "spindle_spindle_on": {
                    "net": "spindle.0.on",
                    "setp": ""
                },
                "spindle_spindle_forward": {
                    "net": "spindle.0.forward",
                    "setp": ""
                },
                "spindle_spindle_reverse": {
                    "net": "spindle.0.reverse",
                    "setp": ""
                },
                "spindle_error_count": {
                    "display": {
                        "title": "Modbus-Errors",
                        "section": "status",
                        "group": "Spindle",
                        "type": "number"
                    },
                    "net": "",
                    "setp": ""
                },
                "spindle_frq_set": {
                    "net": "",
                    "setp": ""
                },
                "spindle_frq_get": {
                    "net": "",
                    "setp": ""
                },
                "spindle_ampere": {
                    "net": "",
                    "setp": "",
                    "display": {
                        "title": "Load",
                        "section": "status",
                        "group": "Spindle",
                        "type": "bar",
                        "min": 0.0,
                        "max": 4.0
                    }
                },
                "spindle_rpm": {
                    "net": "",
                    "setp": ""
                },
                "spindle_dc_volt": {
                    "net": "",
                    "setp": ""
                },
                "spindle_ac_volt": {
                    "net": "",
                    "setp": ""
                },
                "spindle_max_freq": {
                    "net": "",
                    "setp": ""
                },
                "spindle_base_freq": {
                    "net": "",
                    "setp": ""
                },
                "spindle_freq_lower_limit": {
                    "net": "",
                    "setp": ""
                },
                "spindle_rated_motor_voltage": {
                    "net": "",
                    "setp": ""
                },
                "spindle_rated_motor_current": {
                    "net": "",
                    "setp": ""
                },
                "spindle_rpm_at_50hz": {
                    "net": "",
                    "setp": ""
                },
                "spindle_rated_motor_rev": {
                    "net": "",
                    "setp": ""
                },
                "spindle_at_speed": {
                    "net": "",
                    "setp": ""
                },
                "spindle_hycomm_ok": {
                    "net": "",
                    "setp": ""
                },
                "spindle_spindle_at_speed_tolerance": {
                    "setp": "4.0",
                    "net": ""
                }
            },
            "config": {
                "spindle": {
                    "address": 1,
                    "type": 101,
                    "register": 0,
                    "values": 1,
                    "datatype": "float",
                    "scale": 1.0,
                    "unit": "",
                    "error_values": "",
                    "format": "d",
                    "timeout": 150,
                    "delay": 100,
                    "priority": 0,
                    "direction": "output"
                }
            },
            "sub_pos": {
                "dev-1": [
                    1540.0,
                    1190.0
                ]
            }
        },
        {
            "type": "modbus",
            "tx_buffersize": 96,
            "rx_buffersize": 96,
            "pins": {
                "rx": {
                    "pin": "MODBUS0:RX"
                },
                "tx": {
                    "pin": "MODBUS0:TX"
                },
                "tx_enable": {
                    "pin": "MODBUS0:TX_EN",
                    "modifier": [
                        {
                            "type": "invert",
                            "pos": [
                                1180.0,
                                1150.0
                            ]
                        }
                    ]
                }
            },
            "uid": "mb1",
            "pos": [
                1290.0,
                1110.0
            ],
            "signals": {
                "power": {
                    "net": "",
                    "setp": "",
                    "display": {
                        "title": "Power",
                        "section": "status",
                        "group": "Power-Usage",
                        "type": "bar",
                        "min": 0.0,
                        "max": 3700.0
                    }
                },
                "power_total": {
                    "net": "",
                    "setp": "",
                    "display": {
                        "title": "Power-Total",
                        "section": "status",
                        "group": "Power-Usage",
                        "type": "number"
                    }
                },
                "voltage": {
                    "net": "",
                    "setp": ""
                },
                "voltage_valid": {
                    "net": "",
                    "setp": ""
                },
                "voltage_errors": {
                    "net": "",
                    "setp": ""
                },
                "current": {
                    "net": "",
                    "setp": ""
                },
                "current_valid": {
                    "net": "",
                    "setp": ""
                },
                "current_errors": {
                    "net": "",
                    "setp": ""
                },
                "power_valid": {
                    "net": "",
                    "setp": ""
                },
                "power_errors": {
                    "net": "",
                    "setp": ""
                },
                "power_total_valid": {
                    "net": "",
                    "setp": ""
                },
                "power_total_errors": {
                    "net": "",
                    "setp": ""
                }
            },
            "config": {
                "voltage": {
                    "address": 16,
                    "type": 4,
                    "register": 0,
                    "datatype": "float",
                    "values": 1,
                    "scale": 1.0,
                    "unit": "V",
                    "error_values": "",
                    "format": "0.1f",
                    "timeout": 300,
                    "delay": 150,
                    "direction": "input",
                    "priority": 0
                },
                "current": {
                    "address": 16,
                    "type": 4,
                    "register": 8,
                    "datatype": "float",
                    "values": 1,
                    "scale": 1.0,
                    "unit": "A",
                    "error_values": "",
                    "format": "0.2f",
                    "timeout": 300,
                    "delay": 150,
                    "direction": "input"
                },
                "power": {
                    "address": 16,
                    "type": 4,
                    "register": 18,
                    "datatype": "float",
                    "values": 1,
                    "scale": 1.0,
                    "unit": "W",
                    "error_values": "",
                    "format": "0.1f",
                    "timeout": 300,
                    "delay": 150,
                    "direction": "input"
                },
                "power_total": {
                    "address": 16,
                    "type": 4,
                    "register": 256,
                    "datatype": "float",
                    "values": 1,
                    "scale": 1.0,
                    "unit": "kWh",
                    "error_values": "",
                    "format": "0.1f",
                    "timeout": 300,
                    "delay": 150,
                    "direction": "input"
                }
            },
            "sub_pos": {
                "dev-16": [
                    1760.0,
                    1090.0
                ]
            }
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "C:P17",
                    "modifier": [
                        {
                            "type": "invert",
                            "pos": [
                                1170.0,
                                930.0
                            ]
                        }
                    ]
                }
            },
            "uid": "bitin8",
            "pos": [
                1290.0,
                920.0
            ]
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "C:P14",
                    "pull": "",
                    "modifier": [
                        {
                            "type": "invert",
                            "pos": [
                                1170.0,
                                780.0
                            ]
                        }
                    ]
                }
            },
            "uid": "bitin5",
            "pos": [
                1290.0,
                770.0
            ],
            "signals": {
                "bit": {
                    "net": "&motion.enable",
                    "setp": "",
                    "display": {
                        "title": "24V-Power"
                    }
                }
            },
            "name": "p24ok"
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "C:P15",
                    "pull": ""
                }
            },
            "uid": "bitin6",
            "pos": [
                1290.0,
                820.0
            ],
            "signals": {
                "bit": {
                    "net": "",
                    "setp": ""
                }
            }
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "C:P16",
                    "modifier": [
                        {
                            "type": "invert",
                            "pos": [
                                1060.0,
                                880.0
                            ]
                        },
                        {
                            "type": "debounce",
                            "pos": [
                                1170.0,
                                880.0
                            ]
                        }
                    ]
                }
            },
            "uid": "bitin7",
            "pos": [
                1290.0,
                870.0
            ],
            "signals": {
                "bit": {
                    "net": "motion.probe-input",
                    "setp": "",
                    "display": {
                        "section": "status"
                    }
                }
            },
            "name": "touchprobe"
        },
        {
            "type": "signal",
            "signals": {
                "value": {
                    "net": "rio.mb1.power < 3600.0",
                    "setp": "",
                    "display": {
                        "section": "status",
                        "type": "rectled",
                        "color": "green",
                        "off_color": "red",
                        "group": "MACHINE-STATUS"
                    }
                }
            },
            "uid": "mainpower",
            "vtype": "bool",
            "dir": "output",
            "name": "Mainpower",
            "pos": [
                1550.0,
                1600.0
            ]
        },
        {
            "type": "signal",
            "signals": {
                "value": {
                    "net": "rio.Waterflow.frequency > 3.0",
                    "setp": "",
                    "display": {
                        "section": "status",
                        "group": "MACHINE-STATUS",
                        "type": "rectled",
                        "color": "green",
                        "off_color": "red"
                    }
                }
            },
            "uid": "waterflow_status",
            "vtype": "bool",
            "dir": "output",
            "name": "Waterflow-Status",
            "pos": [
                1550.0,
                1650.0
            ]
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "C:P1",
                    "pull": "",
                    "modifier": [
                        {
                            "type": "debounce",
                            "delay": 100.0,
                            "pos": [
                                1020.0,
                                1330.0
                            ]
                        },
                        {
                            "type": "invert",
                            "pos": [
                                1150.0,
                                1330.0
                            ]
                        }
                    ]
                }
            },
            "pos": [
                1280.0,
                1320.0
            ],
            "name": "servo0_ready",
            "uid": "bitin10",
            "signals": {
                "bit": {
                    "net": "&motion.enable",
                    "setp": ""
                }
            }
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "C:P2",
                    "pull": "",
                    "modifier": [
                        {
                            "type": "debounce",
                            "delay": 100.0,
                            "pos": [
                                1020.0,
                                1380.0
                            ]
                        },
                        {
                            "type": "invert",
                            "pos": [
                                1150.0,
                                1380.0
                            ]
                        }
                    ]
                }
            },
            "pos": [
                1280.0,
                1370.0
            ],
            "name": "servo1_ready",
            "uid": "bitin12",
            "signals": {
                "bit": {
                    "net": "&motion.enable",
                    "setp": ""
                }
            }
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "C:P3",
                    "modifier": [
                        {
                            "type": "debounce",
                            "delay": 100.0,
                            "pos": [
                                1020.0,
                                1430.0
                            ]
                        },
                        {
                            "type": "invert",
                            "pos": [
                                1150.0,
                                1430.0
                            ]
                        }
                    ]
                }
            },
            "pos": [
                1280.0,
                1420.0
            ],
            "name": "servo2_ready",
            "uid": "bitin11",
            "signals": {
                "bit": {
                    "net": "&motion.enable",
                    "setp": ""
                }
            }
        },
        {
            "type": "bitin",
            "pins": {
                "bit": {
                    "pin": "C:P4",
                    "modifier": [
                        {
                            "type": "debounce",
                            "delay": 100.0,
                            "pos": [
                                1020.0,
                                1480.0
                            ]
                        },
                        {
                            "type": "invert",
                            "pos": [
                                1150.0,
                                1480.0
                            ]
                        }
                    ]
                }
            },
            "pos": [
                1280.0,
                1470.0
            ],
            "name": "servo3_ready",
            "uid": "bitin9",
            "signals": {
                "bit": {
                    "net": "&motion.enable",
                    "setp": ""
                }
            }
        },
        {
            "type": "bitout",
            "pins": {
                "bit": {
                    "pin": "C:P5",
                    "modifier": [
                        {
                            "type": "invert",
                            "pos": [
                                1140.0,
                                1560.0
                            ]
                        }
                    ]
                }
            },
            "uid": "bitout2",
            "pos": [
                1280.0,
                1550.0
            ],
            "signals": {
                "bit": {
                    "net": "",
                    "setp": ""
                }
            },
            "name": "sdr1"
        },
        {
            "type": "bitout",
            "pins": {
                "bit": {
                    "pin": "C:P6",
                    "modifier": [
                        {
                            "type": "invert",
                            "pos": [
                                1140.0,
                                1610.0
                            ]
                        }
                    ]
                }
            },
            "uid": "bitout3",
            "pos": [
                1280.0,
                1600.0
            ],
            "name": "sdr2",
            "signals": {
                "bit": {
                    "net": "",
                    "setp": ""
                }
            }
        },
        {
            "type": "bitout",
            "pins": {
                "bit": {
                    "pin": "C:P7",
                    "modifier": [
                        {
                            "type": "onerror",
                            "pos": [
                                1140.0,
                                1660.0
                            ]
                        },
                        {
                            "type": "invert",
                            "pos": [
                                1030.0,
                                1660.0
                            ]
                        }
                    ]
                }
            },
            "uid": "bitout4",
            "pos": [
                1280.0,
                1650.0
            ],
            "name": "Cooling-Water",
            "signals": {
                "bit": {
                    "net": "iocontrol.0.user-enable-out",
                    "setp": ""
                }
            }
        },
        {
            "type": "bitout",
            "pins": {
                "bit": {
                    "pin": "C:P8",
                    "modifier": [
                        {
                            "type": "invert",
                            "pos": [
                                1140.0,
                                1710.0
                            ]
                        }
                    ]
                }
            },
            "uid": "bitout5",
            "pos": [
                1280.0,
                1700.0
            ],
            "name": "Cooling-Air",
            "signals": {
                "bit": {
                    "net": "iocontrol.0.coolant-mist",
                    "setp": ""
                }
            }
        },
        {
            "name": "Waterflow",
            "type": "freqin",
            "pins": {
                "freq": {
                    "pin": "C:P9",
                    "modifier": [
                        {
                            "type": "debounce",
                            "delay": 10.0,
                            "pos": [
                                1140.0,
                                1760.0
                            ]
                        }
                    ]
                }
            },
            "freq_min": 2,
            "freq_max": 100,
            "uid": "waterflow",
            "signals": {
                "frequency": {
                    "filters": [
                        {
                            "type": "avg",
                            "depth": 10
                        }
                    ],
                    "display": {
                        "title": "Waterflow",
                        "section": "status",
                        "group": "Spindle",
                        "type": "bar",
                        "min": 0.0,
                        "max": 10.0
                    },
                    "net": "",
                    "setp": ""
                }
            },
            "pos": [
                1280.0,
                1750.0
            ]
        },
        {
            "type": "bitout",
            "pins": {
                "bit": {
                    "pin": "bob1:B:step"
                }
            },
            "uid": "bitout6",
            "pos": [
                1290.0,
                10.0
            ],
            "signals": {
                "bit": {
                    "net": "",
                    "function": "chargepump",
                    "setp": ""
                }
            },
            "name": "chargepump"
        }
    ],
    "flow": {
        "view": {
            "pos": [
                891,
                571
            ],
            "scale": 1.63
        },
        "board": {
            "pos": [
                590.0,
                580.0
            ],
            "rotate": 90
        },
        "hal": {
            "joint": [
                1410.0,
                300.0
            ],
            "spindle": [
                1400.0,
                100.0
            ],
            "spindle.0": [
                1810.0,
                1470.0
            ],
            "joint.4": [
                1380.0,
                190.0
            ],
            "joint.3": [
                1580.0,
                160.0
            ],
            "joint.2": [
                1580.0,
                240.0
            ],
            "joint.1": [
                1580.0,
                320.0
            ],
            "joint.0": [
                1580.0,
                400.0
            ],
            "misc": [
                1720.0,
                750.0
            ]
        }
    }
}
